!function (e, t) { "object" == typeof exports && "undefined" != typeof module ? t(exports) : "function" == typeof define && define.amd ? define(["exports"], t) : t((e = e || self).window = e.window || {}) }(this, function (e) { "use strict"; function t(e, t) { for (var r = 0; r < t.length; r++) { var n = t[r]; n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } function r() { return "undefined" != typeof window } function n() { return a || r() && (a = window.gsap) && a.registerPlugin && a } var o, i, s, a, l, c, u, f, h, g, d, p, $, v, m, y = (_.register = function e(t) { return l || (a = t || n(), r() && window.document && (c = window, f = (u = document).documentElement, h = u.body), a && (g = a.utils.toArray, d = a.utils.clamp, v = a.parseEase("expo"), p = a.core.globals().ScrollTrigger, a.core.globals("ScrollSmoother", _), h && p && (m = p.core._getVelocityProp, l = 1))), l }, o = _, i = [{ key: "progress", get: function e() { return this.scrollTrigger.animation._time / 100 } }], t(o.prototype, i), s && t(o, s), _); function _(e) { var t = this; function r() { return F.update(-N) } function n() { return x.style.overflow = "visible" } function o(e) { var t = e.getTween(); t && (t.pause(), t._time = t._dur, t._tTime = t._tDur), I = !1, e.animation.progress(e.progress, !0) } function i(e, t) { (e !== N && !U || t) && (M && (x.style.transform = "matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, " + e + ", 0, 1)"), O = e - N, N = e, p.isUpdating || p.update()) } function s(e) { return arguments.length ? (U && (N = -e), K.y = -e, I = !0, D(e), this) : -N } function y(e) { P.scrollTop = 0, p.isInViewport(e.target) || e.target === V || t.scrollTo(e.target, !1, "center center"), V = e.target } function b(e) { var t, r, n, o; A.forEach(function (i) { t = i.pins, o = i.markers, e.forEach(function (e) { e.trigger !== i.trigger && e.pinnedContainer !== i.trigger || i === e || (n = ((r = e.start) - i.start - i.offset) / i.ratio - (r - i.start), t.forEach(function (e) { return n -= e.distance / i.ratio - e.distance }), e.setPositions(r + n, e.end + n), e.markerStart && o.push(a.quickSetter([e.markerStart, e.markerEnd], "y", "px")), e.pin && 0 < e.end && (n = e.end - e.start, t.push({ start: e.start, end: e.end, distance: n, trig: e }), i.setPositions(i.start, i.end + n), i.vars.onRefresh(i))) }) }) } function w() { n(), requestAnimationFrame(n), A && (A.forEach(function (e) { var t = e.start, r = e.auto ? Math.min(p.maxScroll(e.scroller), e.end) : t + (e.end - t) / e.ratio, n = (r - e.end) / 2; t -= n, r -= n, e.offset = n || 1e-4, e.pins.length = 0, e.setPositions(Math.min(t, r), Math.max(t, r)), e.vars.onRefresh(e) }), b(p.sort())), F.reset() } function S() { return A && A.forEach(function (e) { return e.vars.onRefresh(e) }) } function T() { return A && A.forEach(function (e) { return e.vars.onRefreshInit(e) }), S } function E(e, t, r, n) { return function () { var o = "function" == typeof t ? t(r, n) : t; return o || 0 === o || (o = n.getAttribute("data-" + e) || ("speed" === e ? 1 : 0)), n.setAttribute("data-" + e, o), "auto" === o ? o : parseFloat(o) } } function k(e, t, r, n) { function o() { t = y(), r = _(), l = parseFloat(t) || 1, $ = (h = "auto" === t) ? 0 : .5, g && g.kill(), g = r && a.to(e, { ease: v, overwrite: !1, y: "+=0", duration: r }), u && (u.ratio = l, u.autoSpeed = h) } function i() { w.y = b + "px", w.renderTransform(1), o() } function s(t) { if (h) { i(); var r, n, o, s, a, u, p, $, v, y, _, b = (r = e, n = d(0, 1, -t.start / (t.end - t.start)), a = r.parentNode || f, u = r.getBoundingClientRect(), $ = (p = a.getBoundingClientRect()).top - u.top, _ = -(y = (Math.abs($) > Math.abs(v = p.bottom - u.bottom) ? $ : v) / (1 - n)) * n, 0 < y && (_ += -(s = .5 == (o = p.height / (c.innerHeight + p.height)) ? 2 * p.height : 2 * Math.min(p.height, -y * o / (2 * o - 1))) / 2, y += s), { change: y, offset: _ }); x = b.change, m = b.offset } else x = (t.end - t.start) * (1 - l), m = 0; S.forEach(function (e) { return x -= e.distance * (1 - l) }), t.vars.onUpdate(t), g && g.progress(1) } var l, u, h, g, $, m, y = E("speed", t, n, e), _ = E("lag", r, n, e), b = a.getProperty(e, "y"), w = e._gsap, S = [], k = [], x = 0; return o(), (1 !== l || h || g) && (s(u = p.create({ trigger: h ? e.parentNode : e, scroller: P, scrub: !0, refreshPriority: -999, onRefreshInit: i, onRefresh: s, onKill: function e(t) { var r = A.indexOf(t); 0 <= r && A.splice(r, 1) }, onUpdate: function e(t) { var r, n, o, i, s = b + x * (t.progress - $), l = S.length, c = 0; if (t.offset) { if (l) { for (o = -K.y, i = t.end; l--;) { if ((n = S[l]).trig.isActive || o >= n.start && o <= n.end) return void (g && (n.trig.progress += n.trig.direction < 0 ? .001 : -.001, n.trig.update(0, 0, 1), g.resetTo("y", parseFloat(w.y), -O, !0), Y && g.progress(1))); o > n.end && (c += n.distance), i -= n.distance } s = b + c + x * ((a.utils.clamp(t.start, t.end, o) - t.start - c) / (i - t.start) - $) } s = Math.round(1e5 * (r = s + m)) / 1e5 || 0, k.length && !h && k.forEach(function (e) { return e(s - c) }), g ? (g.resetTo("y", s, -O, !0), Y && g.progress(1)) : (w.y = s + "px", w.renderTransform(1)) } } })), a.core.getCache(u.trigger).stRevert = T, u.startY = b, u.pins = S, u.markers = k, u.ratio = l, u.autoSpeed = h, e.style.willChange = "transform"), u } l || _.register(a) || console.warn("Please gsap.registerPlugin(ScrollSmoother)"), e = this.vars = e || {}, $ && $.kill(), $ = this; var x, P, R, C, A, H, B, L, U, z, I, V, D = p.getScrollFunc(c), M = 1 === p.isTouch ? !0 === e.smoothTouch ? .8 : parseFloat(e.smoothTouch) || 0 : 0 === e.smooth || !1 === e.smooth ? 0 : parseFloat(e.smooth) || .8, N = 0, O = 0, Y = 1, j = e.onUpdate, q = e.onStop, F = m(0), K = { y: 0 }; function W() { return R = x.clientHeight, x.style.overflow = "visible", h.style.height = R + "px", R - c.innerHeight } p.addEventListener("refresh", w), a.delayedCall(.5, function () { return Y = 0 }), this.scrollTop = s, this.scrollTo = function (e, r, n) { var o = a.utils.clamp(0, p.maxScroll(c), isNaN(e) ? t.offset(e, n) : +e); r ? U ? a.to(t, { duration: M, scrollTop: o, overwrite: "auto", ease: v }) : D(o) : s(o) }, this.offset = function (e, t) { e = g(e)[0]; var r, n = a.getProperty(e, "y"), o = p.create({ trigger: e, start: t || "top top" }); return A && b([o]), r = o.start, o.kill(!1), a.set(e, { y: n }), r }, this.content = function (e) { return arguments.length ? (L = (x = g(e || "#smooth-content")[0] || h.children[0]).getAttribute("style") || "", a.set(x, { overflow: "visible", width: "100%" }), this) : x }, this.wrapper = function (e) { var t, r; return arguments.length ? (B = (P = g(e || "#smooth-wrapper")[0] || (t = x, (r = u.createElement("div")).classList.add("ScrollSmoother-wrapper"), t.parentNode.insertBefore(r, t), r.appendChild(t), r)).getAttribute("style") || "", W(), a.set(P, M ? { overflow: "hidden", position: "fixed", height: "100%", width: "100%", top: 0, left: 0, right: 0, bottom: 0 } : { overflow: "visible", position: "relative", width: "100%", height: "auto", top: "auto", bottom: "auto", left: "auto", right: "auto" }), this) : P }, this.effects = function (e, t) { if (A = A || [], !e) return A.slice(0); (e = g(e)).forEach(function (e) { for (var t = A.length; t--;)A[t].trigger === e && (A[t].kill(), A.splice(t, 1)) }); var r, n, o = (t = t || {}).speed, i = t.lag, s = []; for (r = 0; r < e.length; r++)(n = k(e[r], o, i, r)) && s.push(n); return A.push.apply(A, s), s }, this.content(e.content), this.wrapper(e.wrapper), this.render = function (e) { return i(e || 0 === e ? e : N) }, this.getVelocity = function () { return F.getVelocity(-N) }, p.scrollerProxy(P, { scrollTop: s, scrollHeight: function e() { return h.scrollHeight }, fixedMarkers: !1 !== e.fixedMarkers && !!M, content: x, getBoundingClientRect: function e() { return { top: 0, left: 0, width: c.innerWidth, height: c.innerHeight } } }), p.defaults({ scroller: P }); var G = p.getAll().filter(function (e) { return e.scroller === c || e.scroller === P }); G.forEach(function (e) { return e.revert(!0) }), C = p.create({ animation: a.to(K, { y: function e() { return c.innerHeight - R }, ease: "none", data: "ScrollSmoother", duration: 100, onUpdate: function e() { var n = I; n && (K.y = N, o(C)), i(K.y, n), r(), j && !U && j(t) } }), onRefreshInit: function e() { return K.y = 0 }, id: "ScrollSmoother", scroller: c, invalidateOnRefresh: !0, start: 0, refreshPriority: -9999, end: W, onScrubComplete: function e() { F.reset(), q && q(t) }, scrub: M || !0, onRefresh: function e(t) { o(t), i(K.y) } }), this.smooth = function (e) { return M = e, arguments.length ? C.scrubDuration(e) : C.getTween() ? C.getTween().duration() : 0 }, C.getTween() && (C.getTween().vars.ease = e.ease || v), this.scrollTrigger = C, e.effects && this.effects(!0 === e.effects ? "[data-speed], [data-lag]" : e.effects, {}), G.forEach(function (e) { e.vars.scroller = P, e.init(e.vars, e.animation) }), this.paused = function (e) { return arguments.length ? (!!U !== e && (e ? (C.getTween() && C.getTween().pause(), D(-N), F.reset(), (z = p.normalizeScroll()) && z.disable(), U = p.observe({ preventDefault: !0, type: "wheel,touch,scroll", debounce: !1, onChangeY: function e() { return s(-N) } })) : (U.kill(), U = 0, z && z.enable(), C.progress = (-N - C.start) / (C.end - C.start), o(C))), this) : !!U }, this.kill = function () { t.paused(!1), o(C), C.kill(); for (var e = A ? A.length : 0; e--;)A[e].kill(); p.scrollerProxy(P), p.removeEventListener("refresh", w), P.style.cssText = B, x.style.cssText = L; var r = p.defaults({}); r && r.scroller === P && p.defaults({ scroller: c }), t.observer && p.normalizeScroll(!1), clearInterval(H), $ = null, c.removeEventListener("focusin", y) }, e.normalizeScroll && (this.observer = p.normalizeScroll({ debounce: !0 })), p.config(e), "overscrollBehavior" in c.getComputedStyle(h) && a.set(h, { overscrollBehavior: "none" }), c.addEventListener("focusin", y), H = setInterval(r, 250), "loading" === u.readyState || requestAnimationFrame(function () { return p.refresh() }) } y.version = "3.10.2", y.create = function (e) { return $ && e && $.content() === g(e.content)[0] ? $ : new y(e) }, y.get = function () { return $ }, n() && a.registerPlugin(y), e.ScrollSmoother = y, e.default = y, "undefined" == typeof window || window !== e ? Object.defineProperty(e, "__esModule", { value: !0 }) : delete e.default });